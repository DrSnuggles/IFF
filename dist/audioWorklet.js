class BufferPlayer extends AudioWorkletProcessor{constructor(){super(),this.port.onmessage=this.handleMessage_.bind(this),this.ch=[],this.frame=0}process(e,s,r){if(0==this.ch.length)return!0;if(-1==this.frame)return!0;for(let e=0;e<s[0][0].length;e++){for(let r=0;r<s[0].length;r++)s[0][r][e]=this.ch[r][this.frame];this.frame++,this.frame>=this.ch[0].length&&(this.frame=-1,this.port.postMessage({pos:-1}))}return!0}handleMessage_(e){e.data.ch&&(this.ch=e.data.ch)}}registerProcessor("bufferplayer-processor",BufferPlayer);